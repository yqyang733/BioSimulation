ğŸ‘ ä¿®è¡¥æ™¶ä½“ç»“æ„ä¸­ç¼ºå¤±æ®‹åŸºç»“æ„ä¿¡æ¯

---
[TOC]

---
## modeller
### å®‰è£…
```shell
conda config --add channels salilab
conda install modeller
```
ç„¶åè¿›å…¥å®˜ç½‘ï¼šhttps://salilab.org/modeller/ ç”³è¯·Licenseï¼Œå¡«å…¥ï¼šC:/software/Anaconda/envs/work\Library\modeller/modlib/modeller/config.py å³å¯ã€‚  

### ä»¥ç¼ºå¤±çš„è›‹ç™½PDBç»“æ„ä¸ºæ¨¡æ¿è¿›è¡ŒåŒæºæ¨¡å»ºä¿®å¤loop
**è¿™æ ·å¾—åˆ°çš„è›‹ç™½éª¨æ¶ç»“æ„ä¼šå’ŒPDBåŸå§‹ç»“æ„å­˜åœ¨å°å¹…å·®å¼‚**   
éœ€è¦çš„æ–‡ä»¶ï¼šå¾…ä¿®è¡¥çš„pdbç»“æ„æ–‡ä»¶[1qg8.pdb](ä¿®è¡¥æ™¶ä½“ç»“æ„ä¸­ç¼ºå¤±æ®‹åŸºç»“æ„ä¿¡æ¯/1qg8.pdb)ï¼›å¾…ä¿®è¡¥çš„å®Œæ•´åºåˆ—æ–‡ä»¶ã€‚  
ï¼ˆ1ï¼‰è·å¾—å…·æœ‰å·²çŸ¥ç»“æ„çš„æ®‹åŸºåºåˆ—  
```python
from modeller import *
# Get the sequence of the 1qg8 PDB file, and write to an alignment file
code = '1qg8'

e = Environ()
m = Model(e, file=code)
aln = Alignment(e)
aln.append_model(m, align_codes=code)
aln.write(file=code+'.seq')
```
è¿™å°†äº§ç”Ÿä¸€ä¸ªåºåˆ—æ–‡ä»¶ï¼Œ[1qg8.seq](ä¿®è¡¥æ™¶ä½“ç»“æ„ä¸­ç¼ºå¤±æ®‹åŸºç»“æ„ä¿¡æ¯/1qg8.seq)  
åœ¨åŸå§‹çš„1qg8ç»“æ„ï¼ˆä½œä¸ºæ¨¡æ¿ï¼‰å’Œå®Œæ•´çš„åºåˆ—ä¹‹é—´åšä¸€ä¸ªå¯¹é½ï¼Œå…¶ä¸­æœ‰å¯¹åº”äºç¼ºå¤±æ®‹åŸºçš„ç©ºç™½å­—ç¬¦ã€‚æˆ‘ä»¬å°†å…¶æ”¾å…¥ä¸€ä¸ªæ–°çš„å¯¹é½æ–‡ä»¶ï¼Œ[alignment.ali](ä¿®è¡¥æ™¶ä½“ç»“æ„ä¸­ç¼ºå¤±æ®‹åŸºç»“æ„ä¿¡æ¯/alignment.ali)ã€‚  
ç°åœ¨å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„Modeller 'LoopModel'class æ¥ç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰æ®‹åŸºçš„æ¨¡å‹ï¼Œç„¶åç»†åŒ–å¾ªç¯åŒºåŸŸã€‚å¦‚æœä¸æƒ³è¦å¾ªç¯ç»†åŒ–ï¼Œåªéœ€ä½¿ç”¨ AutoModel classè€Œä¸æ˜¯LoopModelï¼Œå¹¶åˆ é™¤è®¾ç½®a.loopå‚æ•°çš„ä¸‰è¡Œã€‚   
```python
from modeller import *
from modeller.automodel import *    # Load the AutoModel class

log.verbose()
env = Environ()

# directories for input atom files
env.io.atom_files_directory = ['.', '../atom_files']

a = LoopModel(env, alnfile = 'alignment.ali',
              knowns = '1qg8', sequence = '1qg8_fill')
a.starting_model= 1
a.ending_model  = 1

a.loop.starting_model = 1
a.loop.ending_model   = 2
a.loop.md_level       = refine.fast

a.make()
```

### åªè¿›è¡Œloopçš„ä¿®å¤
**åªè¿›è¡Œloopçš„ä¿®å¤ï¼Œè€Œä¿æŒè›‹ç™½å…¶ä»–éƒ¨åˆ†ç»“æ„ä¸å˜ã€‚**
ç”±äº AutoModel æˆ– LoopModel å°†ä»¥æ‚¨è¾“å…¥çš„ PDB ä¸ºæ¨¡æ¿å»ºç«‹ä¸€ä¸ªæ¯”è¾ƒæ¨¡å‹ï¼Œå› æ­¤æœ€ç»ˆæ¨¡å‹ä¸­çš„æ‰€æœ‰åŸå­éƒ½æœ‰å¯èƒ½ç§»åŠ¨ã€‚å¦‚æœä½ çœŸçš„ä¸å¸Œæœ›éç¼ºå¤±çš„æ®‹åŸºç§»åŠ¨ï¼Œä½ å¯ä»¥è¦†ç›–select_atomsæ–¹æ³•ï¼Œç”¨ç±»ä¼¼ä¸‹é¢çš„è„šæœ¬åªé€‰æ‹©ç¼ºå¤±çš„æ®‹åŸºï¼ˆæ³¨æ„æ®‹åŸºç¼–å·åç¦»1ï¼Œå› ä¸ºModellerä»Aé“¾çš„1å¼€å§‹ç»™æ¨¡å‹ç¼–å·ï¼Œè€ŒåŸå§‹PDBä»2å¼€å§‹ç¼–å·ï¼‰ã€‚   
```python
from modeller import *
from modeller.automodel import *    # Load the AutoModel class

log.verbose()
env = Environ()

# directories for input atom files
env.io.atom_files_directory = ['.', '../atom_files']

class MyModel(AutoModel):
    def select_atoms(self):
        return Selection(self.residue_range('133:A', '135:A'),
                         self.residue_range('217:A', '230:A'))

a = MyModel(env, alnfile = 'alignment.ali',
            knowns = '1qg8', sequence = '1qg8_fill')
a.starting_model= 1
a.ending_model  = 1

a.make()
```

**å‚è€ƒèµ„æ–™ï¼š**   
1. https://www.cnblogs.com/matrixray/p/16992396.html

